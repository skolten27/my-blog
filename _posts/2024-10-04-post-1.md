---
layout: post
title:  "Data Visualization Made Easy"
date: 2024-10-03
description: An introduction to ggplot and similar tools in python.   
image: "/assets/img/dataviz.jpg"
display_image: false  # change this to true to display the image below the banner 
---
<p class="intro"><span class="dropcap">T</span>his post takes a dive into simple, yet powerful data visualization tools. We will explore using ggplot in R and how to use similar visualization tools using Python packages to accomplish the same thing.</p>

## Introduction  

There are many many packages to help make data visualization more powerful and accessible to all skill levels. These packages and methods may seem overwhelming at firt. Today, we are going to take a look at some of the most commonly used data visualization tools, walk through how to use each one and compare the results from using different pacakges to help you decide which package will be best for you on your next project!

We are going to be using the *Palmer Penguins* data set gathered by the [Palmer Station Antartica LTER](https://pallter.marine.rutgers.edu/). This data set is commonly used and is great to show various possible variations without getting too complicated or having to wory about tidying data(We will save that for another post). To import the dataset:

{%- highlight python -%}
from palmerpenguins import load_penguins

penguins = load_penguins()
penguins.head()
{%- endhighlight -%}

Let's take a look at the first few rows of this dataset so we get an idea of the format and variables
{%- highlight python -%}
penguins.head()
{%- endhighlight -%}
{% include penguins_table.html %}

## Scatter Plot

Looking at the data we have may different variables. To start out with some exploratory data analysis it can be helpful to compare several variables at once. A scatter plot is a great way to compare more than two variables using colors, shapes or sizes. Let's start by comparing bill length, bill depth, and species.

Let's first do this using the plotnine package. The plotnine package uses the same framework as ggplot2(the renouned R visualization framework)

{%- highlight python -%}
from plotnine import *
plot = (ggplot(penguins,
               aes(x='bill_depth_mm',
                   y='bill_length_mm',
                   color='species'))
        + geom_point()
        + labs(
            title="Bill depth and length",
            subtitle="Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
            x="Bill depth (mm)", y="Bill length (mm)",
            color="Species",
            caption="Source: Palmer Station LTER / palmerpenguins package"
        )
        + scale_color_manual(values=['#2E86C1', '#28B463', '#E74C3C'])  # Custom color scheme
        + theme_minimal())

print(plot)
{%- endhighlight -%}
![Figure]({{site.url}}/{{site.baseurl}}/assets/img/penguins_plot.png)

Notice how in the aesthetic(`aes`) we list our variables of interest and how they should be displayed on the plot(x-axis, y-axis, color). We could include additional variables by assigning variables to shape or size as well. We then specify the type of plot, in our case we want a scatterplot which we denote by the `geom_point` function. And then we have our labels(`labs`) there we can add in a title, label our axes, add a caption, and add the legend for the colors. we can then choose the colors we want using the `scale_color_manual function` and the `theme-minimal` function removes the background shade from the graph to make it more visually apealing and simple.

Now let's do this using `matplotlib`

{%- highlight python -%}
import matplotlib.pyplot as plt

color_map = {
    'Adelie': '#FC766AFF',  
    'Chinstrap': '#B0B8B4FF',  
    'Gentoo': '#184A45FF' 
}
colors = penguins['species'].map(color_map)
plt.scatter(penguins['bill_depth_mm'], penguins['bill_length_mm'], c=colors)
plt.title('Bill Depth and Length', fontsize=16)
plt.suptitle('Dimensions for Adelie, Chinstrap, and Gentoo Penguins', fontsize=12)
plt.xlabel('Bill Depth (mm)', fontsize=14)
plt.ylabel('Bill Length (mm)', fontsize=14)
plt.figtext(0.9, 0.02, 'Source: Palmer Station LTER / palmerpenguins package', 
            horizontalalignment='right', fontsize=10)

plt.show()
{%- endhighlight -%}
![Figure]({{site.url}}/{{site.baseurl}}/assets/img/penguins_plot_matpltlib.png)

Let's breakdown what is happening in the code. The con when trying to great a scatter plot with multiple variables in `matplotlib` is the complexity required in the code to distinguish the third variable. Notice that we have to first creat a color map dictionary and then use that dictionary to map the colors to the species. However, note how straightforward adding additional elements to the plot is using `matplotlib`. We simple use `plt.` and then specify what element of the chart we wish to edit and how we wish to edit it. We can specify additional attributes for each element such as fontsize. Unfortunately,  `matplotlib` does not have a built in function like `caption` in `plotnine` to show our source, but it isn't to hard to just add a custom text to the figure.

Now, I want to show you how to create a similar plot using `seaborn`.

{%- highlight python -%}
import seaborn as sns
import matplotlib.pyplot as plt

sns.scatterplot(
    data=penguins,
    x='bill_depth_mm',
    y='bill_length_mm',
    hue='species',
    palette=sns.color_palette(['#FC766AFF', '#B0B8B4FF', '#184A45FF'])
)
plt.title('Bill Depth and Length', fontsize=16)
plt.suptitle('Dimensions for Adelie, Chinstrap, and Gentoo Penguins', fontsize=12)
plt.xlabel('Bill Depth (mm)', fontsize=14)
plt.ylabel('Bill Length (mm)', fontsize=14)
plt.figtext(0.9, 0.02, 'Source: Palmer Station LTER / palmerpenguins package', 
            horizontalalignment='right', fontsize=10)

plt.show()
{%- endhighlight -%}
![Figure]({{site.url}}/{{site.baseurl}}/assets/img/penguins_plot_seaborn.png)

`seaborn` is a package that works on top of `matplotlib` to improve aesthetic and simplicity. Notice that there isn't a big difference in how the plots look, but I do thing that adding the third variable and measuring it by color is much simpler by defining `hue` in the `sns.scatterplot` function and then specifying the palette rather than creating a dictionary like we have to in `matplotlib`.